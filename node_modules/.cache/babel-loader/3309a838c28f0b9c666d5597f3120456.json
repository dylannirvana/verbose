{"ast":null,"code":"import _classCallCheck from \"/Users/uxdev/Documents/code/gridOrder/react/neworder/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/uxdev/Documents/code/gridOrder/react/neworder/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Filter from './Filter';\nvar FILTER_LIST = ['category', 'function'];\n\nvar FilterFactory =\n/*#__PURE__*/\nfunction () {\n  function FilterFactory() {\n    _classCallCheck(this, FilterFactory);\n\n    var _SELF = this;\n\n    _SELF.filters = new Object();\n    _SELF.filterIndex = 0;\n  }\n\n  _createClass(FilterFactory, [{\n    key: \"addContext\",\n    value: function addContext(label, feed, rendered) {\n      var _SELF = this;\n\n      _SELF.filters[label] = new Filter([], label, feed, rendered);\n    }\n  }, {\n    key: \"getRenderedContexts\",\n    value: function getRenderedContexts() {\n      var _SELF = this;\n\n      var result = new Object();\n      var obj = _SELF.filters;\n      Object.keys(obj).forEach(function (key) {\n        var value = obj[key];\n\n        if (value instanceof Filter && value.shouldRender()) {\n          result[key] = value;\n        }\n      });\n      return Object.keys(obj).length ? result : [];\n    }\n  }, {\n    key: \"updateContext\",\n    value: function updateContext(products) {\n      var _SELF = this;\n\n      if (_SELF.filterIndex < FILTER_LIST.length) {\n        _SELF.addContext(FILTER_LIST[_SELF.filterIndex], products, true);\n\n        _SELF.filterIndex++;\n      }\n    }\n  }, {\n    key: \"filterProducts\",\n    value: function filterProducts(products) {\n      var selectedOptions = [];\n\n      var _SELF = this;\n\n      var RENDERED_CONTEXTS = _SELF.getRenderedContexts();\n\n      FILTER_LIST.forEach(function (filterName) {\n        // console.log(renderedFilters)\n        Object.keys(RENDERED_CONTEXTS).forEach(function (key) {\n          //  console.log(filterName, _SELF.filters[filterName])\n          var SELECTED_OPTION = _SELF.filters[filterName] !== undefined ? _SELF.filters[filterName].getSelectedOption() : undefined;\n\n          if (key === filterName && SELECTED_OPTION) {\n            selectedOptions.push({\n              name: filterName,\n              selectedOption: SELECTED_OPTION\n            });\n          }\n        });\n      });\n      console.log(selectedOptions, RENDERED_CONTEXTS);\n      return products.filter(function (product, index) {\n        //Loop through each product in the product feed\n        var result = true;\n        selectedOptions.some(function (filter) {\n          //Loop through the applied filters\n          //Check if the product matches atleast one of the the selected filters\n          if (result && product[filter.name] !== undefined && product[filter.name].toLowerCase().indexOf(filter.selectedOption.toLowerCase()) !== -1) {\n            console.log(product[filter.name]); // console.log(filter.label, filter.selectedOption.toLowerCase())\n            //If there is a match, return true and exit the loop\n            // result = true;\n\n            return false;\n          } else {\n            result = false;\n          } //If there is no match, return false and continue with the loop\n\n\n          return false;\n        });\n        return result;\n      });\n    }\n  }]);\n\n  return FilterFactory;\n}();\n\nexport { FilterFactory as default };","map":{"version":3,"sources":["/Users/uxdev/Documents/code/gridOrder/react/neworder/src/components/GridControls/Filters/FilterFactory.js"],"names":["Filter","FILTER_LIST","FilterFactory","_SELF","filters","Object","filterIndex","label","feed","rendered","result","obj","keys","forEach","key","value","shouldRender","length","products","addContext","selectedOptions","RENDERED_CONTEXTS","getRenderedContexts","filterName","SELECTED_OPTION","undefined","getSelectedOption","push","name","selectedOption","console","log","filter","product","index","some","toLowerCase","indexOf"],"mappings":"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","sourcesContent":["import Filter from './Filter';\r\n\r\nconst FILTER_LIST = ['category', 'function']\r\nexport default class FilterFactory {\r\n\r\n\r\n    constructor() {\r\n        const _SELF = this;\r\n        _SELF.filters = new Object();\r\n        _SELF.filterIndex = 0;\r\n    }\r\n\r\n    addContext(label, feed, rendered) {\r\n        const _SELF = this;\r\n        _SELF.filters[label] = new Filter([], label, feed, rendered);\r\n\r\n    }\r\n\r\n    getRenderedContexts() {\r\n\r\n        const _SELF = this;\r\n\r\n        let result = new Object();\r\n        let obj = _SELF.filters;\r\n\r\n        Object.keys(obj).forEach(function (key) {\r\n\r\n            const value = obj[key];\r\n\r\n            if (value instanceof Filter && value.shouldRender()) {\r\n                result[key] = value;\r\n            }\r\n        })\r\n\r\n\r\n        return Object.keys(obj).length ? result : [];\r\n    }\r\n\r\n    updateContext(products) {\r\n        const _SELF = this;\r\n        if (_SELF.filterIndex < FILTER_LIST.length) {\r\n            _SELF.addContext(FILTER_LIST[_SELF.filterIndex], products, true)\r\n            _SELF.filterIndex++;\r\n        }\r\n\r\n    };\r\n\r\n    filterProducts(products) {\r\n        let selectedOptions = [];\r\n        const _SELF = this;\r\n        const RENDERED_CONTEXTS = _SELF.getRenderedContexts();\r\n        FILTER_LIST.forEach(function (filterName) {\r\n            // console.log(renderedFilters)\r\n            Object.keys(RENDERED_CONTEXTS).forEach(function (key) {\r\n\r\n              //  console.log(filterName, _SELF.filters[filterName])\r\n                const SELECTED_OPTION =  _SELF.filters[filterName] !== undefined ? _SELF.filters[filterName].getSelectedOption() : undefined;\r\n                if (key === filterName && SELECTED_OPTION) {\r\n                    selectedOptions.push({\r\n                        name: filterName,\r\n                        selectedOption: SELECTED_OPTION\r\n                    });\r\n                }\r\n            })\r\n\r\n\r\n        });\r\n          console.log(selectedOptions,RENDERED_CONTEXTS)\r\n        return products.filter(function (product, index) { //Loop through each product in the product feed\r\n            let result = true;\r\n             selectedOptions.some(function (filter) { //Loop through the applied filters\r\n\r\n                //Check if the product matches atleast one of the the selected filters\r\n                if (result && product[filter.name] !== undefined && product[filter.name].toLowerCase().indexOf(filter.selectedOption.toLowerCase()) !== -1) {\r\nconsole.log(product[filter.name])\r\n                    // console.log(filter.label, filter.selectedOption.toLowerCase())\r\n                    //If there is a match, return true and exit the loop\r\n\r\n                   // result = true;\r\n                    return false;\r\n                }else{\r\n                    result = false;\r\n                }\r\n\r\n                //If there is no match, return false and continue with the loop\r\n                return false;\r\n            })\r\n\r\n            return result;\r\n        })\r\n\r\n    };\r\n\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}